From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Lo=C3=AFc=20Mangeonjean?= <loic@coderpad.io>
Date: Fri, 10 Oct 2025 16:48:18 +0200
Subject: [PATCH] fix: remove empty layout message before actual view layout

to prevent a flicker when it opens
---
 src/vs/workbench/browser/parts/paneCompositePart.ts | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/src/vs/workbench/browser/parts/paneCompositePart.ts b/src/vs/workbench/browser/parts/paneCompositePart.ts
index a452575cf9e..d65a4c77c52 100644
--- a/src/vs/workbench/browser/parts/paneCompositePart.ts
+++ b/src/vs/workbench/browser/parts/paneCompositePart.ts
@@ -231,15 +231,15 @@ export abstract class AbstractPaneCompositePart extends CompositePart<PaneCompos
 	}
 
 	protected override showComposite(composite: Composite): void {
+		this.layoutEmptyMessage(false);
 		super.showComposite(composite);
 		this.layoutCompositeBar();
-		this.layoutEmptyMessage();
 	}
 
 	protected override hideActiveComposite(): Composite | undefined {
 		const composite = super.hideActiveComposite();
 		this.layoutCompositeBar();
-		this.layoutEmptyMessage();
+		this.layoutEmptyMessage(true);
 		return composite;
 	}
 
@@ -621,8 +621,7 @@ export abstract class AbstractPaneCompositePart extends CompositePart<PaneCompos
 		}
 	}
 
-	private layoutEmptyMessage(): void {
-		const visible = !this.getActiveComposite();
+	private layoutEmptyMessage(visible = !this.getActiveComposite()): void {
 		this.element.classList.toggle('empty', visible);
 		if (visible) {
 			this.titleLabel?.updateTitle('', '');
