From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Lo=C3=AFc=20Mangeonjean?= <loic@coderpad.io>
Date: Thu, 18 Dec 2025 18:20:14 +0100
Subject: [PATCH] fix: remove problematic code causing issues with webpack and
 other bundlers

---
 src/vs/editor/browser/services/editorWorkerService.ts         | 3 ---
 .../services/extensions/browser/webWorkerExtensionHost.ts     | 4 +---
 2 files changed, 1 insertion(+), 6 deletions(-)

diff --git a/src/vs/editor/browser/services/editorWorkerService.ts b/src/vs/editor/browser/services/editorWorkerService.ts
index d5c878af3b3..c31f2227418 100644
--- a/src/vs/editor/browser/services/editorWorkerService.ts
+++ b/src/vs/editor/browser/services/editorWorkerService.ts
@@ -36,7 +36,6 @@ import { WorkerTextModelSyncClient } from '../../common/services/textModelSync/t
 import { EditorWorkerHost } from '../../common/services/editorWorkerHost.js';
 import { StringEdit } from '../../common/core/edits/stringEdit.js';
 import { OffsetRange } from '../../common/core/ranges/offsetRange.js';
-import { FileAccess } from '../../../base/common/network.js';
 import { isCompletionsEnabledWithTextResourceConfig } from '../../common/services/completionsEnablement.js';
 
 /**
@@ -60,8 +59,6 @@ export class EditorWorkerService extends Disposable implements IEditorWorkerServ
 	declare readonly _serviceBrand: undefined;
 
 	public static readonly workerDescriptor = new WebWorkerDescriptor({
-		esmModuleLocation: () => FileAccess.asBrowserUri('vs/editor/common/services/editorWebWorkerMain.js'),
-		esmModuleLocationBundler: () => new URL('../../common/services/editorWebWorkerMain.ts?esm', import.meta.url),
 		label: 'editorWorkerService'
 	});
 
diff --git a/src/vs/workbench/services/extensions/browser/webWorkerExtensionHost.ts b/src/vs/workbench/services/extensions/browser/webWorkerExtensionHost.ts
index 3d30e364528..a0236ccec6a 100644
--- a/src/vs/workbench/services/extensions/browser/webWorkerExtensionHost.ts
+++ b/src/vs/workbench/services/extensions/browser/webWorkerExtensionHost.ts
@@ -357,7 +357,5 @@ export class WebWorkerExtensionHost extends Disposable implements IExtensionHost
 }
 
 const extensionHostWorkerMainDescriptor = new WebWorkerDescriptor({
-	label: 'extensionHostWorkerMain',
-	esmModuleLocation: () => FileAccess.asBrowserUri('vs/workbench/api/worker/extensionHostWorkerMain.js'),
-	esmModuleLocationBundler: () => new URL('../../../api/worker/extensionHostWorkerMain.ts?esm', import.meta.url),
+	label: 'extensionHostWorkerMain'
 });
